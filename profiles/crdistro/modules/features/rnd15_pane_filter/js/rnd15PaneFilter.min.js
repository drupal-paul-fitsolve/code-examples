(function(d){Drupal.behaviors.rnd15PaneFilter={defaults:{sectionWrapperClass:".pane-filter-section",contentWrapperClass:".pane-filter-content",paneFilterGroupClass:".pane-filter-group",panelPaneClass:".panel-pane",activeButtonClass:"active",lastButtonClass:"last",lastGroupClass:"last",filterButtonClass:".filter__button",dataFilterGroupSelector:"data-filter-group",dataFilterValueSelector:"data-filter-value",dataFilterPrefix:"[data-filter-",dataFilterSuffix:'"]',dataFilterResetSelector:"all",filterArray:[],
$buttons:null,$panes:null,$filterGroups:null,$sectionWrapper:null,paneHideClass:"pane-filter-pane__hide",currentFilterSelector:"",currentActiveButtonsSelector:""},attach:function(a,b){if("xs"!=Drupal.settings.crl2.breakpointActive){var c=Drupal.behaviors.rnd15PaneFilter;Drupal.settings.rnd15PaneFilter=d.extend(Drupal.settings.rnd15PaneFilter?Drupal.settings.rnd15PaneFilter:{},c.defaults);d(Drupal.settings.rnd15PaneFilter.sectionWrapperClass,a).once("rnd15PaneFilter",c.init)}},init:function(){var a=
Drupal.behaviors.rnd15PaneFilter,b=Drupal.settings.rnd15PaneFilter;b.$sectionWrapper=d(this);b.$filterGroups=d(b.paneFilterGroupClass,b.$sectionWrapper);b.$buttons=d(b.filterButtonClass,b.$filterGroups);b.$panes=d(b.contentWrapperClass+" "+b.panelPaneClass,b.$sectionWrapper);b.$filterGroups.last().addClass(b.lastGroupClass);b.$buttons.filter(":last-child").addClass(b.lastButtonClass);a.resetGroupActiveButtons();a.updateURLs();d.History.bind(a.handleHistoryJS)},handleHistoryJS:function(a){var b=Drupal.settings.rnd15PaneFilter,
c=Drupal.behaviors.rnd15PaneFilter;b.filterArray=[];a=a.split("?");a=a.shift();a=a.split("/");a.shift();for(i=0;i<a.length;i+=2)b.filterArray.push({filterGroup:a[i],filterValue:a[i+1]});c.filterPanes()},filterPanes:function(){var a=Drupal.behaviors.rnd15PaneFilter;a.setCurrentFilterAndActiveButtonSelectors();a.resetGroupActiveButtons();a.updateURLs();a.togglePaneVisibility()},updateURLs:function(){Drupal.settings.rnd15PaneFilter.$buttons.each(Drupal.behaviors.rnd15PaneFilter.updateIndividualButtonHref)},
resetGroupActiveButtons:function(){var a=Drupal.settings.rnd15PaneFilter,b=Drupal.behaviors.rnd15PaneFilter;0===a.filterArray.length?a.$buttons.filter('[data-filter-value="'+a.dataFilterResetSelector+'"]').addClass(a.activeButtonClass):a.$filterGroups.each(b.resetActiveButtonsByGroup)},togglePaneVisibility:function(){var a=Drupal.settings.rnd15PaneFilter;""!==a.currentFilterSelector?a.$panes.addClass(a.paneHideClass).filter(a.currentFilterSelector).removeClass(a.paneHideClass):a.$panes.removeClass(a.paneHideClass)},
setCurrentFilterAndActiveButtonSelectors:function(){var a=Drupal.settings.rnd15PaneFilter,b=[],c="";for(i=0;i<a.filterArray.length;i++)b.push("["+a.dataFilterValueSelector+"="+a.filterArray[i].filterValue+"]["+a.dataFilterGroupSelector+"="+a.filterArray[i].filterGroup+"]"),a.filterArray[i].filterValue!==a.dataFilterResetSelector&&(c+=a.dataFilterPrefix+a.filterArray[i].filterGroup+'*="'+a.filterArray[i].filterValue+a.dataFilterSuffix);a.currentFilterSelector=c;a.currentActiveButtonsSelector=b.join()},
updateIndividualButtonHref:function(){var a=Drupal.settings.rnd15PaneFilter,b=d(this),c=b.attr(a.dataFilterGroupSelector),e=b.attr(a.dataFilterValueSelector),e="#/"+c+"/"+e;for(i=0;i<a.filterArray.length;i++){var f=a.filterArray[i].filterGroup,g=a.filterArray[i].filterValue;f!==c&&(e=e.concat("/"+f+"/"+g))}b.attr("href",e)},resetActiveButtonsByGroup:function(){var a=Drupal.settings.rnd15PaneFilter;d(a.$buttons,this).filter(a.currentActiveButtonsSelector).siblings().removeClass(a.activeButtonClass).end().addClass(a.activeButtonClass)}}})(jQuery);
