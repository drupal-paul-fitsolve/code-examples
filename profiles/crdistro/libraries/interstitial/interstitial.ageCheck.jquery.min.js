(function(a){jQuery.fn.interstitialAgeCheck=function(x){function y(){var c=a(this);c.attr("data-interstitial")&&c.attr("data-interstitial");c=a(this).data("age-check-interstitial-options");if(!d){var n=a("body"),b=e;null!==c&&"object"===typeof c&&(b=a.extend(e,c));p=b.ageLimit;b.redirectButtonAttributes.href=b.promptRedirectUrl?b.promptRedirectUrl:h;f=a("<div/>").attr(b.backgroundAttributes).appendTo(n).on("click",q);d=a("<div/>").attr(b.overlayAttributes).wrapInner('<div class="interstitial__content"><div class="interstitial__content-inner"><div class="interstitial__question"></div><div class="interstitial__prompt"></div></div></div>').appendTo(n);
r=a("<h2/>").attr(b.textAttributes).html(b.question);g=a("<input/>").attr(b.ageInputAttributes).after("<label>"+b.ageInputLabel+"</label>");k=a("<a/>").attr(b.submitButtonAttributes).text(b.submitButtonText).on("click",z);t=a(".interstitial__content-inner .interstitial__question",d).append(r,g,k);k.add(g).wrapAll('<div class="interstitital__question-form "></div>').end().wrap("<p></p>");l=a("<a/>").attr(b.cancelButtonAttributes).text(e.cancelButtonText).on("click",q);m=a("<a/>").attr(b.redirectButtonAttributes).text(b.redirectButtonText);
u=a("<h2/>").attr(b.promptTitleAttributes).html(b.promptTitle);v=a("<p/>").attr(b.promptDescriptionAttributes).html(b.promptDescription);w=a(".interstitial__content-inner .interstitial__prompt",d).hide().append(u,v,m,l);l.add(m).wrapAll('<p class="interstitital__btn type--centred"></p>')}f.toggle();d.toggle();return d.is(":visible")}function q(a){a.preventDefault();f.hide();d.hide()}function z(a){a.preventDefault();g.val()>=p?(f.hide(),d.hide(),window.location.href=h):(t.hide(),w.show())}function A(a){a.preventDefault();
y.apply(this)}var d,f,r,g,k,t,l,m,u,v,w,e=a.extend({question:"How old are you?",ageLimit:16,promptTitle:"Grab a grown up",promptDescription:"If you are under 16, an adult has to enter the prize draw for you. <br>This is because they will need to accompany you if you win the prize..",promptRedirectUrl:"/who-nose/competition?age=under16",cancelButtonText:"I'll come back later",redirectButtonText:"I am a grown up, continue",submitButtonText:"Submit",ageInputLabel:"years old",overlayAttributes:{id:"interstitial",
"class":"interstitial interstitial--age-check"},backgroundAttributes:{id:"interstitial__background"},cancelButtonAttributes:{"class":"interstitital__btn-cancel",href:"#close"},ageInputAttributes:{name:"age",type:"text",size:"3","class":"interstitital__age-input form-text"},redirectButtonAttributes:{"class":"interstitital__btn-redirect"},submitButtonAttributes:{"class":"interstitital__btn-submit"},textAttributes:{"class":"interstitial__message"},promptDescriptionAttributes:{"class":"interstitial__prompt-description"},
promptTitleAttributes:{"class":"interstitial__prompt-title"}},x),h="/",p=e.ageLimit;return this.each(function(){var c=a(this);c.on("click",A);h=c.attr("href")})}})(jQuery);