!function(a){Drupal.settings.sr16splashtouchMenu=Drupal.settings.sr16splashtouchMenu||{},Drupal.behaviors.sr16splashtouchMenu={defaults:{mainNavClass:"nav.nav.collapsible",toggleButtonClass:"button.button-nav--toggle",mainNavTouchClass:"nav--touch",expandedOpenClass:"open",transitionDurationPer100px:40,touchNavBreakpoint:"(max-width: 1149px)",noneTouchNavBreakpoint:"(min-width: 1150px)",$navSite:null,$toggleButton:null,$menus:null,$primaryNav:null,$primaryNavListItems:null,$primaryNavListItemsExpanded:null,$primaryNavLinkExpanded:null,$secondaryNav:null,navCollapsed:!0,isLtIe9:!1,isDebug:!1},attach:function(e){var s=Drupal.behaviors.sr16splashtouchMenu;a(s.defaults.mainNavClass,e).once("sr16splashtouchMenu",function(){Drupal.settings.sr16splashtouchMenu=a.extend({},Drupal.settings.sr16splashtouchMenu,s.defaults),s.setupTouchMenu(e)})},setupTouchMenu:function(e){var s=Drupal.behaviors.sr16splashtouchMenu,t=Drupal.settings.sr16splashtouchMenu;s.isLtIe9=a("html",e).hasClass("lt-ie9"),s.isLtIe9||(t.$navSite=a(t.mainNavClass,e),t.$menus=a("ul.menu",t.$navSite),t.$toggleButton=a(t.toggleButtonClass,t.$navSite),t.$primaryNav=a("> ul.menu",t.$navSite),t.$primaryNavListItems=a("> li",t.$primaryNav),t.$primaryNavListItemsExpanded=a("li.expanded",t.$primaryNav),t.$primaryNavLinkExpanded=a("> a",t.$primaryNavListItemsExpanded),t.$secondaryNav=a("> ul.menu",t.$primaryNavListItemsExpanded),t.isDebug=s.checkDebugMode(),t.isDebug&&(t.isTouch=!0,t.$navSite.addClass(t.mainNavTouchClass),a("html").addClass("touch").removeClass("no-touch")),s.responsiveTouch(),t.isTouch&&t.$navSite.not("."+t.mainNavTouchClass).addClass(t.mainNavTouchClass),s.refreshMenuAttributes(),t.$toggleButton.on("click",s.EH_toggleNav),t.$primaryNavLinkExpanded.on("click",s.EH_handleSubNav))},EH_toggleNav:function(a,e){var s=Drupal.behaviors.sr16splashtouchMenu,t=Drupal.settings.sr16splashtouchMenu;t.navCollapsed=t.$navSite.hasClass("collapsed");var n=t.navCollapsed?t.$primaryNav.data("menu-height"):0;t.$navSite.toggleClass("collapsed"),t.$toggleButton.toggleClass("active"),t.navCollapsed||s.closeAllSecondaryMenus(null),t.navCollapsed||t.$toggleButton.trigger("blur"),t.$primaryNav.css({"-webkit-transition-duration":t.$primaryNav.data("menu-transition-duration"),"transition-duration":t.$primaryNav.data("menu-transition-duration"),"max-height":n,overflow:"hidden"}),"closeAll"!==e&&s.closeNavButtons.apply(t.$toggleButton)},EH_handleSubNav:function(e){var s=Drupal.behaviors.sr16splashtouchMenu,t=Drupal.settings.sr16splashtouchMenu;if(t.isTouch){e.preventDefault();var n=a(this).parent("li.expanded"),u=a("> ul.menu",n),o=u.hasClass(t.expandedOpenClass),i=o?0:u.data("menu-height");u.css({"-webkit-transition-duration":u.data("menu-transition-duration"),"transition-duration":u.data("menu-transition-duration"),"max-height":i}),u.parents("ul.menu").css({"max-height":1400}),u.toggleClass(t.expandedOpenClass);var r=u.parents("."+t.expandedOpenClass).andSelf();s.closeAllSecondaryMenus(r)}},responsiveTouch:function(){var a=Drupal.behaviors.sr16splashtouchMenu,e=Drupal.settings.sr16splashtouchMenu;try{enquire.register(e.touchNavBreakpoint,{unmatch:a.refreshMenuAttributes}).register(e.noneTouchNavBreakpoint,{match:a.touchNavOff,unmatch:a.touchNavOn},!0)}catch(s){window.console&&console.log(s)}},calculateTransitionDuration:function(a){var e=Drupal.settings.sr16splashtouchMenu;return 100/e.transitionDurationPer100px*a},refreshMenuAttributes:function(){var a=Drupal.behaviors.sr16splashtouchMenu,e=Drupal.settings.sr16splashtouchMenu;e.$toggleButton.removeClass("active"),e.$menus.each(a._menuStoreAttributes),e.navCollapsed=!1,e.$navSite.not(".collapsed").addClass("collapsed"),a.closeAllSecondaryMenus()},_menuStoreAttributes:function(){var e=Drupal.behaviors.sr16splashtouchMenu,s=Drupal.settings.sr16splashtouchMenu,t=a(this);t.css({visibility:"hidden","max-height":"none"});var n=(t.prop("scrollHeight"),t.outerHeight(),t.height(),Math.max(t.prop("scrollHeight"))),u=e.calculateTransitionDuration(n);t.data("menu-height",n).data("menu-transition-duration",u),t.css({"max-height":s.isTouch?0:"none",visibility:"visible"})},closeAllSecondaryMenus:function(a){var e=(Drupal.behaviors.sr16splashtouchMenu,Drupal.settings.sr16splashtouchMenu);e.$menus.filter("."+e.expandedOpenClass).not(a).removeClass(e.expandedOpenClass).css({"max-height":0})},touchNavOn:function(){var a=Drupal.behaviors.sr16splashtouchMenu,e=Drupal.settings.sr16splashtouchMenu;e.isTouch||e.isDebug||(e.$navSite.addClass(e.mainNavTouchClass),e.$primaryNav.css({overflow:"hidden","max-height":"0"}),e.$secondaryNav.css({overflow:"hidden","max-height":"0"}),e.isTouch=!0),a.refreshMenuAttributes()},touchNavOff:function(){var a=(Drupal.behaviors.sr16splashtouchMenu,Drupal.settings.sr16splashtouchMenu);a.isTouchDevice||a.isDebug||(a.$navSite.removeClass(a.mainNavTouchClass),a.$primaryNav.css({overflow:"visible","max-height":"none"}),a.$secondaryNav.css({overflow:"visible","max-height":"none"}),a.isTouch=!1)},checkDebugMode:function(){var e=a.getUrlVar("touch");return e&&"undefined"!=typeof a.cookie&&(a.cookie("sr16splashtouchMenuDebug",e,{expires:1,path:"/"}),"false"===e&&a.cookie("sr16splashtouchMenuDebug",null,{expires:1,path:"/"})),"undefined"!=typeof a.cookie?"true"===a.cookie("sr16splashtouchMenuDebug"):!1},closeNavButtons:function(){$currentNavButton=a(this),a(this).siblings(".active").trigger("click",["closeAll"])},fastTouchDetect:function(){var a=Drupal.behaviors.sr16splashtouchMenu,e=Drupal.settings.sr16splashtouchMenu;if(e.isTouch=e.isTouchDevice="undefined"!=typeof Modernizr&&Modernizr.touch,"undefined"!=typeof window.matchMedia&&!e.isTouch){var s=window.matchMedia(a.defaults.touchNavBreakpoint);e.isTouch=s.matches,e.matchesTouchNavBreakpoint=s.matches}var t=document.querySelector(a.defaults.mainNavClass);e.isTouch&&t&&(t.className=t.className+" nav--touch")}},a.getUrlVar=function(a){var e=new RegExp(a+"=([^&]*)","i").exec(window.location.search);return e&&unescape(e[1])||""},Drupal.behaviors.sr16splashtouchMenu.fastTouchDetect()}(jQuery,window);