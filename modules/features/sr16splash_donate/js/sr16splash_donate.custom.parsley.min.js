(function($){Drupal.behaviors.cr_donate_validate={attach:function(context){var parsleySettings={errors:{errorsWrapper:'<ul class="messages error"></ul>',container:function(element,isRadioOrCheckbox){if(isRadioOrCheckbox)return element.closest(".form-type-radios, .form-type-checkbox")}},listeners:{onFieldError:function(element,constraints,ParsleyField){if(element.closest(".cr-plus-address-fields").length){$(".form-item-address-select",context).hide();$(".cr-plus-address-fields",context).show()}if(element.attr("id")==
"edit-paymenttype-amex")element.show()},onFieldValidate:function(element,ParsleyField){if(element.attr("id")=="edit-paymenttype-amex")element.show()},onFieldSuccess:function(element,ParsleyField){if(element.attr("id")=="edit-paymenttype-amex")element.hide()}}};var $form=$("#cr-donate-form, #cr-donate-giftaid-form, #cr-donate-pay-in-form",context);if($($form).length){$form.parsley(parsleySettings);$form.find(".button").click(function(){$form.parsley("destroy");if($(this).is("#edit-previous"));else if($(this).hasClass("button-paypal"))$form.parsley($.extend({},
parsleySettings,{inputs:"input.cr-donate-amount"}));else{var isMobile=$(window).width()<740;$form.find('input[name="email_confirm"]').prop("disabled",isMobile);$form.parsley(parsleySettings);addPayInFormVisibilityBasedValidation()}});addPayInFormVisibilityBasedValidation()}function addPayInFormVisibilityBasedValidation(){$("#cr-donate-pay-in-form").parsley("addListener",{onFieldValidate:function(elem){if($(elem).closest("fieldset").is(":hidden"))return true;if($(".cr-fundraising-form-step-2").length==
0)if($(elem).closest(".form-wrapper").is(":hidden"))return true;if($(elem).is("#establishment_lookup")&&$("#manual-address-fields-container").is(":visible"))return true;if($(elem).is("#edit-organisation-other")&&$(elem).is(":hidden"))return true;return false}})}}};Drupal.behaviors.cr_donate_validate_payments={attach:function(context){$("#edit-paymenttype-amex").focus(function(){$("#edit-paymenttype-amex").hide()})}}})(jQuery);