(function(d){Drupal.settings.sr16splashtouchMenu=Drupal.settings.sr16splashtouchMenu||{};Drupal.behaviors.sr16splashtouchMenu={defaults:{mainNavClass:"nav.nav.collapsible",toggleButtonClass:"button.button-nav--toggle",mainNavTouchClass:"nav--touch",expandedOpenClass:"open",transitionDurationPer100px:40,touchNavBreakpoint:"(max-width: 1149px)",noneTouchNavBreakpoint:"(min-width: 1150px)",$navSite:null,$toggleButton:null,$menus:null,$primaryNav:null,$primaryNavListItems:null,$primaryNavListItemsExpanded:null,$primaryNavLinkExpanded:null,
$secondaryNav:null,navCollapsed:!0,isLtIe9:!1,isDebug:!1},attach:function(a,c){var b=Drupal.behaviors.sr16splashtouchMenu;d(b.defaults.mainNavClass,a).once("sr16splashtouchMenu",function(){Drupal.settings.sr16splashtouchMenu=d.extend({},Drupal.settings.sr16splashtouchMenu,b.defaults);b.setupTouchMenu(a)})},setupTouchMenu:function(a){var c=Drupal.behaviors.sr16splashtouchMenu,b=Drupal.settings.sr16splashtouchMenu;c.isLtIe9=d("html",a).hasClass("lt-ie9");c.isLtIe9||(b.$navSite=d(b.mainNavClass,a),b.$menus=d("ul.menu",b.$navSite),
b.$toggleButton=d(b.toggleButtonClass,b.$navSite),b.$primaryNav=d("> ul.menu",b.$navSite),b.$primaryNavListItems=d("> li",b.$primaryNav),b.$primaryNavListItemsExpanded=d("li.expanded",b.$primaryNav),b.$primaryNavLinkExpanded=d("> a",b.$primaryNavListItemsExpanded),b.$secondaryNav=d("> ul.menu",b.$primaryNavListItemsExpanded),b.isDebug=c.checkDebugMode(),b.isDebug&&(b.isTouch=!0,b.$navSite.addClass(b.mainNavTouchClass),d("html").addClass("touch").removeClass("no-touch")),c.responsiveTouch(),b.isTouch&&
b.$navSite.not("."+b.mainNavTouchClass).addClass(b.mainNavTouchClass),c.refreshMenuAttributes(),b.$toggleButton.on("click",c.EH_toggleNav),b.$primaryNavLinkExpanded.on("click",c.EH_handleSubNav))},EH_toggleNav:function(a,c){var b=Drupal.behaviors.sr16splashtouchMenu,d=Drupal.settings.sr16splashtouchMenu;d.navCollapsed=d.$navSite.hasClass("collapsed");var e=d.navCollapsed?d.$primaryNav.data("menu-height"):0;d.$navSite.toggleClass("collapsed");d.$toggleButton.toggleClass("active");d.navCollapsed||b.closeAllSecondaryMenus(null);
d.navCollapsed||d.$toggleButton.trigger("blur");d.$primaryNav.css({"-webkit-transition-duration":d.$primaryNav.data("menu-transition-duration"),"transition-duration":d.$primaryNav.data("menu-transition-duration"),"max-height":e,overflow:"hidden"});"closeAll"!==c&&b.closeNavButtons.apply(d.$toggleButton)},EH_handleSubNav:function(a){var c=Drupal.behaviors.sr16splashtouchMenu,b=Drupal.settings.sr16splashtouchMenu;if(b.isTouch){a.preventDefault();a=d(this).parent("li.expanded");a=d("> ul.menu",a);var f=a.hasClass(b.expandedOpenClass)?
0:a.data("menu-height");a.css({"-webkit-transition-duration":a.data("menu-transition-duration"),"transition-duration":a.data("menu-transition-duration"),"max-height":f});a.parents("ul.menu").css({"max-height":1400});a.toggleClass(b.expandedOpenClass);b=a.parents("."+b.expandedOpenClass).andSelf();c.closeAllSecondaryMenus(b)}},responsiveTouch:function(){var a=Drupal.behaviors.sr16splashtouchMenu,c=Drupal.settings.sr16splashtouchMenu;try{enquire.register(c.touchNavBreakpoint,{unmatch:a.refreshMenuAttributes}).register(c.noneTouchNavBreakpoint,
{match:a.touchNavOff,unmatch:a.touchNavOn},!0)}catch(b){window.console&&console.log(b)}},calculateTransitionDuration:function(a){return 100/Drupal.settings.sr16splashtouchMenu.transitionDurationPer100px*a},refreshMenuAttributes:function(){var a=Drupal.behaviors.sr16splashtouchMenu,c=Drupal.settings.sr16splashtouchMenu;c.$toggleButton.removeClass("active");c.$menus.each(a._menuStoreAttributes);c.navCollapsed=!1;c.$navSite.not(".collapsed").addClass("collapsed");a.closeAllSecondaryMenus()},_menuStoreAttributes:function(a,
c){var b=Drupal.behaviors.sr16splashtouchMenu,f=Drupal.settings.sr16splashtouchMenu,e=d(this);e.css({visibility:"hidden","max-height":"none"});e.prop("scrollHeight");e.outerHeight();e.height();var g=Math.max(e.prop("scrollHeight")),b=b.calculateTransitionDuration(g);e.data("menu-height",g).data("menu-transition-duration",b);e.css({"max-height":f.isTouch?0:"none",visibility:"visible"})},closeAllSecondaryMenus:function(a){var c=Drupal.settings.sr16splashtouchMenu;c.$menus.filter("."+c.expandedOpenClass).not(a).removeClass(c.expandedOpenClass).css({"max-height":0})},
touchNavOn:function(){var a=Drupal.behaviors.sr16splashtouchMenu,c=Drupal.settings.sr16splashtouchMenu;c.isTouch||c.isDebug||(c.$navSite.addClass(c.mainNavTouchClass),c.$primaryNav.css({overflow:"hidden","max-height":"0"}),c.$secondaryNav.css({overflow:"hidden","max-height":"0"}),c.isTouch=!0);a.refreshMenuAttributes()},touchNavOff:function(){var a=Drupal.settings.sr16splashtouchMenu;a.isTouchDevice||a.isDebug||(a.$navSite.removeClass(a.mainNavTouchClass),a.$primaryNav.css({overflow:"visible","max-height":"none"}),
a.$secondaryNav.css({overflow:"visible","max-height":"none"}),a.isTouch=!1)},checkDebugMode:function(){var a=d.getUrlVar("touch");a&&"undefined"!==typeof d.cookie&&(d.cookie("sr16splashtouchMenuDebug",a,{expires:1,path:"/"}),"false"===a&&d.cookie("sr16splashtouchMenuDebug",null,{expires:1,path:"/"}));return"undefined"!==typeof d.cookie?"true"===d.cookie("sr16splashtouchMenuDebug"):!1},closeNavButtons:function(){$currentNavButton=d(this);d(this).siblings(".active").trigger("click",["closeAll"])},fastTouchDetect:function(){var a=
Drupal.behaviors.sr16splashtouchMenu,c=Drupal.settings.sr16splashtouchMenu;c.isTouch=c.isTouchDevice="undefined"!==typeof Modernizr&&Modernizr.touch;if("undefined"!==typeof window.matchMedia&&!c.isTouch){var b=window.matchMedia(a.defaults.touchNavBreakpoint);c.isTouch=b.matches;c.matchesTouchNavBreakpoint=b.matches}c.isTouch&&(a=document.querySelector(a.defaults.mainNavClass),a.className+=" nav--touch")}};d.getUrlVar=function(a){return(a=(new RegExp(a+"=([^&]*)","i")).exec(window.location.search))&&unescape(a[1])||
""};Drupal.behaviors.sr16splashtouchMenu.fastTouchDetect()})(jQuery,window);